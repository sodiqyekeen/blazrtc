class BlazMediaDevice{async ensureMediaPermissions(){const n=await navigator.permissions.query({name:"camera"}),t=await navigator.permissions.query({name:"microphone"});(n.state!=="granted"||t.state!=="granted")&&await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}async getConnectedDevices(){await this.ensureMediaPermissions();const n=await navigator.mediaDevices.enumerateDevices();return n.filter(n=>n.kind!=="other").map(n=>({deviceId:n.deviceId||"",kind:n.kind||"",label:n.label||"",groupId:n.groupId||""}))}async handleDeviceChange(n){const t=await this.getConnectedDevices();n.invokeMethodAsync("RaiseOnDeviceChange",t)}listenForDeviceChanges(n){navigator.mediaDevices.addEventListener("devicechange",()=>{this.handleDeviceChange(n)})}cancelDeviceChangeListener(){navigator.mediaDevices.removeEventListener("devicechange")}async getMediaStream(n,t){navigator.mediaDevices.getUserMedia(n).then(n=>(n&&t&&this.showMediaStream(n,t,!0),n)).catch(n=>{console.error("Error occurred while accessing media devices",n)})}showMediaStream(n,t,i){if(n&&t){const r=document.getElementById(t);r&&(r.srcObject=n,r.muted=i)}}stopMediaStream(n){if(n){const t=document.getElementById(n);if(console.info("videoElement",t),t.srcObject){const n=t.srcObject,i=n.getTracks();i.forEach(n=>n.stop())}}}}window.blazMediaDevice=new BlazMediaDevice;